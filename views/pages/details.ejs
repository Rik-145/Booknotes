<%- include('../partials/header.ejs') %>

<div class="top-right-user">
    <% if (username) { %>
        Welcome, <strong><%= username %></strong>
    <% } %>
</div>

<div class="parentContainerUpdate">
    <div class="leftContainerUpdate">
        <div class="containerUpdate">
            <div class="bookCover">
                <img src="https://covers.openlibrary.org/b/isbn/<%= bookData[0].isbn %>-L.jpg?default=false"
                     alt="<%= bookData[0].title %>" class="coverIMG">
            </div>
            <div class="bookDescriptionUpdate">
                <h2><%= bookData[0].title %> </h2>
            </div>
        </div>
    </div>

    <div class="updateContainer">
        <form action="/updateNotes" method="POST">
            <div>
                <label for="notes">Notes:*</label>
                <textarea
                        name="notes"
                        id="notes"
                        placeholder="My notes about the book..."
                        rows="5"
                        required
                ></textarea>
            </div>

            <div>
                <label for="rating">Your Rating:*</label>
                <select name="rating" id="rating">
                    <option value="1" <%= bookData[0] && bookData[0].rating == 1 ? "selected" : "" %>>★☆☆☆☆ (1)</option>
                    <option value="2" <%= bookData[0] && bookData[0].rating == 2 ? "selected" : "" %>>★★☆☆☆ (2)</option>
                    <option value="3" <%= bookData[0] && bookData[0].rating == 3 ? "selected" : "" %>>★★★☆☆ (3)</option>
                    <option value="4" <%= bookData[0] && bookData[0].rating == 4 ? "selected" : "" %>>★★★★☆ (4)</option>
                    <option value="5" <%= bookData[0] && bookData[0].rating == 5 ? "selected" : "" %>>★★★★★ (5)</option>
                </select>
            </div>

            <div>
                <label for="pages">Pages:*</label>
                <input
                        type="number"
                        name="pages"
                        id="pages"
                        placeholder="Total pages read"
                        value="<%= myData[0] ? myData[0].mypages : '' %>"
                        min="0"
                        max="<%= bookData[0] ? bookData[0].pages : '' %>"
                        e
                        required
                >
                <small>
                    (0 to <%= bookData[0] ? bookData[0].pages : 'N/A' %> pages)
                </small>
            </div>

            <div>
                <label for="finishedDate">Finished Date:*</label>
                <input
                        type="date"
                        name="finishedDate"
                        id="finishedDate"
                        min="1900-01-01"
                        max="<%= new Date().toISOString().split('T')[0] %>"
                        value="<%= bookData[0] && bookData[0].finishedDate
                                ? bookData[0].finishedDate.toISOString().split('T')[0]
                                : new Date().toISOString().split('T')[0] %>"
                >
                <small>Select a date between 1900-01-01 and today</small>
            </div>

            <div class="buttonContainer">
                <input type="submit" value="Update Notes">
                <button type="button" onclick="window.history.back()">Cancel</button>
            </div>

            <div class="warning">
                <label>* Required</label>
            </div>
        </form>
    </div>


    <div id="error" style="color: red; text-align: center;">
        <% if (typeof errorMessage !== "undefined" && errorMessage) { %>
            <p style="color: red;"><%= errorMessage %></p>
        <% } %>
    </div>


</div>
</div>
</div>


<%- include('../partials/footer.ejs') %>
